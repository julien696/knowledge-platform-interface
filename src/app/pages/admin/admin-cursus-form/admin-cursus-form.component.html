<main>
    <div class="form-container">
        <div class="form-card">
            <h1>{{ isEditMode ? 'Modifier le cursus' : 'Créer un cursus' }}</h1>
            
            <form [formGroup]="cursusForm" (ngSubmit)="onSubmit()" class="admin-form">
                
                <div class="form-group">
                    <label for="name">Nom du cursus</label>
                    <input
                        type="text"
                        id="name"
                        formControlName="name"
                        class="form-control"
                        [class.error]="name?.invalid && name?.touched"
                        placeholder="Nom du cursus">
                    
                    <div *ngIf="name?.invalid && name?.touched" class="error-message">
                        <span *ngIf="name?.errors?.['required']">Le nom est requis</span>
                        <span *ngIf="name?.errors?.['minlength']">Minimum 2 caractères</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="price">Prix (€)</label>
                    <input
                        type="number"
                        id="price"
                        formControlName="price"
                        class="form-control"
                        [class.error]="price?.invalid && price?.touched"
                        placeholder="0.00€"
                        min="0">
                    
                    <div *ngIf="price?.invalid && price?.touched" class="error-message">
                        <span *ngIf="price?.errors?.['required']">Le prix est requis</span>
                        <span *ngIf="price?.errors?.['min']">Le prix doit être positif</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="theme">Thème</label>
                    <select
                        id="theme"
                        formControlName="theme"
                        class="form-control"
                        [class.error]="theme?.invalid && theme?.touched">
                        <option value="">Sélectionner un thème</option>
                        <option *ngFor="let theme of themes" [value]="theme.id">
                            {{ theme.name }}
                        </option>
                    </select>
                    
                    <div *ngIf="theme?.invalid && theme?.touched" class="error-message">
                        <span *ngIf="theme?.errors?.['required']">Le thème est requis</span>
                    </div>
                </div>

                <div *ngIf="error" class="error-general">
                    {{ error }}
                </div>

                <div class="form-actions">
                    <button
                        type="submit"
                        class="btn-primary"
                        [disabled]="cursusForm.invalid">
                        <span *ngIf="isEditMode">{{ isEditMode ? 'Modification...' : 'Création...' }}</span>
                        <span *ngIf="!isEditMode">{{ isEditMode ? 'Modifier' : 'Créer' }}</span>
                    </button>
                    
                    <button
                        type="button"
                        class="btn-secondary"
                        (click)="router.navigate(['/admin'])">
                        Annuler
                    </button>
                </div>
            </form>
        </div>
    </div>
</main>